(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{"?8412":()=>{},"?f8c1":()=>{},"?c937":()=>{},"?a6fc":()=>{},"?f1a1":()=>{},"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Fbytarch%2FDocuments%2Fprojects%2Fgenie%2Fapp%2Flearning%2Fexpresso%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":(e,s,t)=>{Promise.resolve().then(t.bind(t,"(app-pages-browser)/./app/learning/expresso/page.tsx"))},"(app-pages-browser)/./app/learning/expresso/page.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{default:()=>m});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/next/dist/api/navigation.js"),n=t("(app-pages-browser)/./components/features/pdf_view/PdfViewer.tsx"),l=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-left.js"),d=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/smartphone.js"),c=t("(app-pages-browser)/./components/ui/button.tsx"),p=e([n,c]);[n,c]=p.then?(await p)():p;let m=()=>{let[e,s]=(0,o.useState)(!1),t=(0,i.useRouter)();(0,o.useEffect)(()=>{let e=()=>{s(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let r=()=>{t.push("/services")};return e?(0,a.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md relative",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:r,className:"absolute top-0 left-0 text-gray-300 hover:text-white hover:bg-red-900/30",children:(0,a.jsx)(l.A,{className:"h-6 w-6"})}),(0,a.jsx)(d.A,{className:"w-24 h-24 mx-auto mb-6 text-red-500"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4 text-red-500",children:"Mobile View Not Supported"}),(0,a.jsx)("p",{className:"text-gray-300 mb-6",children:"This application is optimized for larger screens. Please use a tablet, laptop, or desktop device to access the full functionality."}),(0,a.jsxs)("div",{className:"bg-red-900/20 border border-red-800/50 p-4 rounded-xl",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-red-400 mb-2",children:"Recommended Devices:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-gray-300",children:[(0,a.jsx)("li",{children:"Tablets"}),(0,a.jsx)("li",{children:"Laptops"}),(0,a.jsx)("li",{children:"Desktop Computers"})]})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:r,className:"absolute top-0 left-0 text-gray-300 hover:text-white hover:bg-red-900/30",children:(0,a.jsx)(l.A,{className:"h-6 w-6"})}),(0,a.jsx)(n.A,{})]})};r()}catch(e){r(e)}})},"(app-pages-browser)/./components/features/pdf_view/PdfChatInterface.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{A:()=>A});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),n=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/message-circle.js"),l=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/book-open.js"),d=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/corner-down-right.js"),c=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/trash.js"),p=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/messages-square.js"),m=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/pause.js"),x=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-2.js"),u=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/trash-2.js"),h=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js"),g=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js"),b=t("(app-pages-browser)/./lib/api.ts"),w=t("(app-pages-browser)/./components/ui/button.tsx"),f=t("(app-pages-browser)/./components/ui/switch.tsx"),y=t("(app-pages-browser)/./components/ui/label.tsx"),v=t("(app-pages-browser)/./components/ui/slider.tsx"),j=t("(app-pages-browser)/./node_modules/react-markdown/lib/react-markdown.js"),k=t("(app-pages-browser)/./node_modules/remark-math/lib/index.js"),N=t("(app-pages-browser)/./node_modules/rehype-katex/index.js");t("(app-pages-browser)/./node_modules/katex/dist/katex.min.css");var _=t("(app-pages-browser)/./components/ui/tooltip.tsx"),C=e([b,w,f,y,v,_]);[b,w,f,y,v,_]=C.then?(await C)():C;let A=e=>{let{extractedText:s}=e,[t,r]=(0,o.useState)([]),[C,A]=(0,o.useState)(""),[z,F]=(0,o.useState)(!1),[P,D]=(0,o.useState)("expresso"),[S,E]=(0,o.useState)(!1),[$,L]=(0,o.useState)("undergrad"),[R,I]=(0,o.useState)(s),[B,U]=(0,o.useState)(!1),[q,V]=(0,o.useState)(null),[T,M]=(0,o.useState)(null),H=(0,o.useRef)(null),W={primary:"Explain as if talking to a primary school student, using simple language and basic concepts.",highschool:"Explain with a high school level of complexity, introducing more detailed concepts.",undergrad:"Provide a comprehensive undergraduate-level explanation with academic depth.",postgrad:"Deliver a sophisticated, research-oriented explanation with advanced terminology.",lecturer:"Craft an in-depth, lecture-style explanation suitable for academic presentation."},Z=()=>Math.random().toString(36).substr(2,9),O=async e=>{let s=C.trim();if(!s||z)return;let a=e||R,o={id:Z(),role:"user",content:s},i="expresso"===P?"Mode: ".concat(P,". Basic Info: ").concat(S,". Explain Level: ").concat($,". \n         Explanation Style: ").concat(W[$],"\n         Context: ").concat(a):"Context from PDF: ".concat(a),n=[...t,o];r(n),A(""),F(!0);try{let e="";await (0,b.Wd)("bytarch::deminji-scorpio",[{role:"user",content:i},...n],(s,t)=>{t?F(!1):(e+=s,r(s=>{let t=s[s.length-1];return"assistant"===t.role?[...s.slice(0,-1),{...t,content:e}]:[...s,{id:Z(),role:"assistant",content:e}]}))})}catch(e){console.error("Error:",e),r(e=>[...e,{id:Z(),role:"assistant",content:"Sorry, there was an error processing your request."}]),F(!1)}},J=()=>{let e=t.filter(e=>"assistant"===e.role).pop();e&&(D("pdf"),I(e.content))},K=e=>{r(s=>s.filter(s=>s.id!==e))};(0,o.useEffect)(()=>{var e;null===(e=H.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]);let Q=(e,s)=>{let t=e.replace(/```[\s\S]*?```/g,"").replace(/`[^`]+`/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/\[(.*?)\]\(.*?\)/g,"$1").replace(/^#+\s/gm,"").replace(/>\s/gm,"").trim();if(T===s){if(B){null==q||q.pause(),U(!1);return}if(q){q.play(),U(!0);return}}q&&(q.pause(),q.currentTime=0);let r=new Audio("https://blacksourcellc.taile6b163.ts.net/a?text=".concat(encodeURIComponent(t)));r.addEventListener("play",()=>{U(!0),M(s)}),r.addEventListener("pause",()=>{U(!1)}),r.addEventListener("ended",()=>{U(!1),V(null),M(null)}),r.play(),V(r),U(!0),M(s)},X=async()=>{let e;F(!0),e=S?"\n    Mode: Expresso\n    Basic Info: ".concat(S,"\n    Explain Level: ").concat($,"\n    Explanation Style: ").concat(W[$],"\n    Context: ").concat(R,"\n\n    Instructions for the AI:\n    1. Provide only the response to the user's request. Do not include any additional commentary, disclaimers, or unrelated information.\n    2. Provide a concise **overview or summary** of the topic, focusing on foundational information.\n    3. Ensure the summary is clear, brief, and directly tied to the provided context (").concat(R,").\n    4. Do not deviate from the requested style or add unnecessary details.\n    5. Be concise and avoid repetition.\n    6. **Formatting Instructions**:\n       - Bold important sentences by enclosing them in ** (e.g., **This is an important sentence**).\n       - Highlight important words or phrases by enclosing them in backticks (e.g., `key term`).\n    7. Prioritize clarity and readability while applying formatting.\n\n    Please provide a concise overview or summary of the topic, tailored to the provided context.\n  "):"\n    Mode: Expresso\n    Basic Info: ".concat(S,"\n    Explain Level: ").concat($,"\n    Explanation Style: ").concat(W[$],"\n    Context: ").concat(R,"\n\n    Instructions for the AI:\n    1. Provide only the response to the user's request. Do not include any additional commentary, disclaimers, or unrelated information.\n    2. Start with a brief **overview** of the topic to establish context.\n    3. Follow up with **detailed insights, explanations, and analysis** tailored to the specified complexity level.\n    4. Ensure the explanation is comprehensive and directly addresses the topic within the provided context (").concat(R,").\n    5. Do not deviate from the requested style or add unnecessary details.\n    6. Be concise and avoid repetition.\n    7. **Formatting Instructions**:\n       - Bold important sentences by enclosing them in ** (e.g., **This is an important sentence**).\n       - Highlight important words or phrases by enclosing them in backticks (e.g., `key term`).\n    8. Prioritize clarity and readability while applying formatting.\n\n    Please provide a comprehensive explanation of the topic, tailored to the specified complexity level and context.\n  ");try{let s="";await (0,b.Wd)("bytarch::deminji-scorpio",[{role:"user",content:e}],(e,t)=>{t?F(!1):(s+=e,r(e=>{let t=e[e.length-1];return(null==t?void 0:t.role)==="assistant"?[...e.slice(0,-1),{...t,content:s}]:[...e,{id:Z(),role:"assistant",content:s}]}))})}catch(e){console.error("Error explaining topic:",e),r(e=>[...e,{id:Z(),role:"assistant",content:"Sorry, there was an error generating the explanation."}]),F(!1)}};return(0,a.jsxs)(i.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:" w-[400px]  h-full  bg-black/40  backdrop-blur-sm  border-l  border-gray-800/50  flex  flex-col  fixed  right-0  top-0  bottom-0  z-50  shadow-2xl  shadow-red-900/20 ",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-800/50",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(w.$,{variant:"pdf"===P?"default":"ghost",size:"sm",onClick:()=>D("pdf"),children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Chat"]}),(0,a.jsxs)(w.$,{variant:"expresso"===P?"default":"ghost",size:"sm",onClick:()=>D("expresso"),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"})," Expresso"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t.length>0&&!z&&"pdf"===P&&(0,a.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>{let e=t[t.length-1];if("assistant"===e.role){let e={id:Z(),role:"user",content:"Continue from where you left off."};r(s=>[...s,e]),F(!0),(0,b.Wd)("bytarch::deminji-scorpio",[{role:"user",content:"All responses should be based on the following highlighted text extracted from the PDF: ".concat(s,". Use this text as the primary source of information for generating answers.")},{role:"assistant",content:"noted!"},...t,e],(e,s)=>{s?F(!1):r(s=>{let t=s[s.length-1];return"assistant"===t.role?[...s.slice(0,-1),{...t,content:t.content+e}]:[...s,{id:Z(),role:"assistant",content:e}]})})}},className:"text-gray-300 hover:text-white hover:bg-red-900/30",children:(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})}),t.length>0&&(0,a.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>{r([])},className:"text-gray-300 hover:text-white hover:bg-red-900/30",children:(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"})}),"expresso"===P&&t.length>0&&(0,a.jsx)(w.$,{variant:"ghost",size:"sm",onClick:J,className:"text-gray-300 hover:text-white hover:bg-red-900/30",children:(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"})})]})]}),"expresso"===P&&("expresso"===P?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.d,{id:"basic-info",checked:S,onCheckedChange:E}),(0,a.jsx)(y.J,{htmlFor:"basic-info",children:"Basic Information"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{children:"Explanation Level"}),(0,a.jsx)(v.A,{defaultValue:[2],min:0,max:4,step:1,onValueChange:e=>{L(["primary","highschool","undergrad","postgrad","lecturer"][e[0]])},className:"my-4"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Current Level: ",$.charAt(0).toUpperCase()+$.slice(1)]})]})]}):null),(0,a.jsxs)("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:[t.map((e,s)=>(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"\n              max-w-[90%] \n              rounded-xl \n              p-3 \n              relative \n              group\n              ".concat("user"===e.role?"bg-red-700/20 text-gray-200 self-end ml-auto":"bg-gray-800/50 text-gray-300 self-start","\n            "),children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-3",children:(0,a.jsx)(j.$,{remarkPlugins:[k.A],rehypePlugins:[N.A],className:" w-full  prose  dark:prose-invert  prose-sm  md:prose-base  max-w-full  break-words  text-pretty  overflow-x-auto  text-wrap  whitespace-normal [&>*]:text-gray-200 [&_code]:text-red-400 [&_pre]:bg-black/30 [&_blockquote]:border-l-red-500 ",components:{code:e=>{let{node:s,inline:t,className:r,children:o,...i}=e;if(t)return(0,a.jsx)("code",{className:" break-words  overflow-x-auto  max-w-full  whitespace-pre-wrap  bg-gray-900  px-1  rounded text-wrap text-xs  // Smaller text size ",...i,children:o})},h1:e=>{let{node:s,...t}=e;return(0,a.jsx)("h1",{className:"scroll-m-20  text-lg md:text-xl lg:text-2xl  // Reduced sizes font-bold tracking-tight  text-white  border-b border-gray-700  pb-2 mb-4",...t})},h2:e=>{let{node:s,...t}=e;return(0,a.jsx)("h2",{className:"scroll-m-20  text-base md:text-lg lg:text-xl  // Reduced sizes font-semibold tracking-tight  text-gray-200  border-b border-gray-700  pb-2 mt-6 mb-4",...t})},h3:e=>{let{node:s,...t}=e;return(0,a.jsx)("h3",{className:"scroll-m-20  text-sm md:text-base  font-semibold  text-gray-300  mt-4 mb-2",...t})},pre:e=>{let{node:s,...t}=e;return(0,a.jsx)("pre",{className:" overflow-x-auto  max-w-full  whitespace-pre-wrap  break-words  bg-gray-900  p-2  rounded text-wrap text-xs  // Smaller text size ",...t})},p:e=>{let{node:s,...t}=e;return(0,a.jsx)("p",{className:"text-xs md:text-sm  // Reduced text size leading-relaxed  text-gray-300  [&:not(:first-child)]:mt-6",...t})},ul:e=>{let{node:s,...t}=e;return(0,a.jsx)("ul",{className:"my-6 ml-6  list-disc  text-xs md:text-sm  // Reduced text size text-gray-300  [&>li]:mt-2",...t})},ol:e=>{let{node:s,...t}=e;return(0,a.jsx)("ol",{className:"my-6 ml-6  list-decimal  text-xs md:text-sm  // Reduced text size text-gray-300  [&>li]:mt-2",...t})},li:e=>{let{node:s,...t}=e;return(0,a.jsx)("li",{className:"pl-2  text-xs  // Smaller text size text-gray-300",...t})},a:e=>{let{node:s,...t}=e;return(0,a.jsx)("a",{className:"text-blue-400  hover:text-blue-300  underline  transition-colors  duration-200 text-xs  // Smaller text size",target:"_blank",rel:"noopener noreferrer",...t})},blockquote:e=>{let{node:s,...t}=e;return(0,a.jsx)("blockquote",{className:"border-l-4 border-gray-700  pl-4  italic  text-xs  // Smaller text size text-gray-400  my-4",...t})},pre(e){let{node:s,children:t,...r}=e;return(0,a.jsx)("pre",{className:" bg-black/30  rounded  p-2  text-xs  // Smaller text size break-words  break-all  whitespace-pre-wrap overflow-hidden ",...r,children:t})}},children:e.content})}),!z&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(_.Bc,{children:[(0,a.jsxs)(_.m_,{delayDuration:300,children:[(0,a.jsx)(_.k$,{asChild:!0,children:(0,a.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>Q(e.content,s),className:"text-gray-500 hover:text-white",children:B&&T===s?(0,a.jsx)(m.A,{className:"w-4 h-4"}):(0,a.jsx)(x.A,{className:"w-4 h-4"})})}),(0,a.jsx)(_.ZI,{children:(0,a.jsx)("p",{children:B&&T===s?"Pause":"Listen"})})]}),(0,a.jsxs)(_.m_,{delayDuration:300,children:[(0,a.jsx)(_.k$,{asChild:!0,children:(0,a.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>K(e.id),className:"text-gray-500 hover:text-white",children:(0,a.jsx)(u.A,{className:"w-4 h-4"})})}),(0,a.jsx)(_.ZI,{children:(0,a.jsx)("p",{children:"Delete"})})]}),(0,a.jsxs)(_.m_,{delayDuration:300,children:[(0,a.jsx)(_.k$,{asChild:!0,children:(0,a.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>J(),className:"text-gray-500 hover:text-white",children:(0,a.jsx)(p.A,{className:"w-4 h-4"})})}),(0,a.jsx)(_.ZI,{children:(0,a.jsx)("p",{children:"Ask a follow up "})})]})]})})]},e.id)),(0,a.jsx)("div",{ref:H})]}),"expresso"===P&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-800/50",children:(0,a.jsx)(w.$,{onClick:X,disabled:z,className:" w-full  bg-red-600  hover:bg-red-700  text-white  flex  items-center  justify-center  space-x-2 ",children:z?(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Explain Topic"]})})}),"pdf"===P&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-800/50",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),onKeyPress:e=>"Enter"===e.key&&O(),placeholder:"Ask about the highlighted text...",disabled:z,className:" w-full  bg-black/30  backdrop-blur-sm  border  border-gray-800/50  rounded-full  px-4  py-2  text-gray-200  focus:border-red-500  transition-colors  disabled:opacity-50 outline-none "}),(0,a.jsx)("button",{onClick:()=>O(),disabled:z||!s,className:" bg-red-600  hover:bg-red-700  text-white  rounded-full  p-2  transition-colors  disabled:opacity-50  flex  items-center  justify-center  w-12  h-12 ",children:z?(0,a.jsx)(h.A,{className:"h-5 w-5 animate-spin"}):(0,a.jsx)(g.A,{className:"h-5 w-5"})})]})})]})};r()}catch(e){r(e)}})},"(app-pages-browser)/./components/features/pdf_view/PdfViewer.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{A:()=>j});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),n=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js"),l=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/sparkles.js"),d=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/file-text.js"),c=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/book.js"),p=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/upload.js"),m=t("(app-pages-browser)/./node_modules/react-dropzone/dist/es/index.js"),x=t("(app-pages-browser)/./node_modules/next/dist/api/navigation.js"),u=t("(app-pages-browser)/./components/ui/button.tsx"),h=t("(app-pages-browser)/./node_modules/@react-pdf-viewer/default-layout/lib/index.js");t("(app-pages-browser)/./node_modules/@react-pdf-viewer/core/lib/styles/index.css"),t("(app-pages-browser)/./node_modules/@react-pdf-viewer/default-layout/lib/styles/index.css");var g=t("(app-pages-browser)/./node_modules/@react-pdf-viewer/selection-mode/lib/index.js"),b=t("(app-pages-browser)/./node_modules/@react-pdf-viewer/core/lib/index.js"),w=t("(app-pages-browser)/./components/features/pdf_view/PdfChatInterface.tsx"),f=t("(app-pages-browser)/./lib/utils.ts"),y=t("(app-pages-browser)/./node_modules/sonner/dist/index.mjs"),v=e([u,w,f]);[u,w,f]=v.then?(await v)():v;let j=()=>{let[e,s]=(0,o.useState)(null),[t,r]=(0,o.useState)(null),[v,j]=(0,o.useState)(""),[k,N]=(0,o.useState)(!1),[_,C]=(0,o.useState)(0);(0,x.useRouter)();let A=(0,o.useRef)(null),z=(0,o.useRef)(null),F=(0,h.defaultLayoutPlugin)(),P=(0,g.selectionModePlugin)(),{SwitchSelectionModeButton:D}=P,S=async e=>{let t=await (0,f.FH)();if(!t){y.toast.error("Error!",{description:"Unable to verify user credentials."});return}let a=new Date;if(!(t&&t.expiration_date&&new Date(t.expiration_date)>a)){y.toast.error("Premium Access Required!",{description:"Upgrade your plan to access this feature."});return}if(e&&"application/pdf"===e.type){let t=URL.createObjectURL(e);s(e),r(t)}else alert("Please upload a valid PDF file.")},E=async()=>{let e=await (0,f.FH)();if(!e){y.toast.error("Error!",{description:"Unable to verify user credentials."});return}let s=new Date;if(!(e&&e.expiration_date&&new Date(e.expiration_date)>s)){y.toast.error("Premium Access Required!",{description:"Upgrade your plan to access this feature."});return}let t=window.getSelection();if(t&&t.rangeCount>0){var r;let e=t.getRangeAt(0);if(null===(r=A.current)||void 0===r?void 0:r.contains(e.commonAncestorContainer)){let e=t.toString().trim();e?(j(e),N(!0)):alert("No text selected. Please highlight some text.")}else alert("Please highlight text within the PDF viewer.")}else alert("No text is selected.")},$=(0,o.useCallback)(e=>{e.length>0&&S(e[0])},[]),{getRootProps:L,getInputProps:R,isDragActive:I}=(0,m.VB)({onDrop:$,accept:{"application/pdf":[".pdf"]}});return(0,a.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-black to-red-950/20 opacity-70 pointer-events-none"}),(0,a.jsx)("div",{className:"relative z-10 max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen",children:[(0,a.jsx)("div",{className:"\n            ".concat(k?"w-2/3":"w-full"," \n            p-4 \n            bg-black/40 \n            backdrop-blur-sm \n            transition-all \n            duration-300 \n            ease-in-out\n            relative\n          "),children:t?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(u.$,{variant:"ghost",size:"sm",onClick:()=>{s(null),r(null),j(""),N(!1),z.current&&(z.current.value="")},className:"text-sm text-gray-300 hover:text-white hover:bg-red-900/30",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Close"]}),(0,a.jsxs)(u.$,{variant:"ghost",size:"sm",onClick:E,className:"text-sm text-gray-300 hover:text-white hover:bg-red-900/30",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"})," Use Highlighted Text in Expresso"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{children:["Pages: ",_]}),(0,a.jsx)(c.A,{className:"w-4 h-4 text-red-500 ml-4"}),(0,a.jsx)("span",{children:(null==e?void 0:e.name)?"".concat(e.name.slice(0,15),"..."):"Unknown Document"})]})]}),(0,a.jsx)("div",{className:"h-[calc(100vh-100px)] rounded-lg overflow-hidden",ref:A,children:(0,a.jsx)(b.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,a.jsx)(b.Viewer,{fileUrl:t,plugins:[F,P],onDocumentLoad:e=>{C(e.doc.numPages)}})})})]}):(0,a.jsx)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("div",{...L(),className:"flex flex-col items-center p-8 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer ".concat(I?"bg-red-900/20":"bg-transparent"),children:[(0,a.jsx)("input",{...R()}),(0,a.jsx)(p.A,{className:"w-16 h-16 text-gray-400 mb-4"}),(0,a.jsx)("span",{className:"text-gray-300 mb-4",children:I?"Drop the PDF here...":"Drag & Drop or Click to Upload PDF"}),(0,a.jsx)(u.$,{onClick:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.click()},children:"Choose File"})]})})}),k&&(0,a.jsx)(w.A,{extractedText:v,onClose:()=>N(!1)})]})})]})};r()}catch(e){r(e)}})},"(app-pages-browser)/./components/ui/button.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{$:()=>p});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/@radix-ui/react-slot/dist/index.mjs"),n=t("(app-pages-browser)/./node_modules/class-variance-authority/dist/index.mjs"),l=t("(app-pages-browser)/./lib/utils.ts"),d=e([l]);l=(d.then?(await d)():d)[0];let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus-visible:ring-gray-300",{variants:{variant:{default:"bg-gray-900 text-gray-50 shadow hover:bg-gray-900/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90",destructive:"bg-red-500 text-gray-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50",secondary:"bg-gray-100 text-gray-900 shadow-sm hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-50",link:"text-gray-900 underline-offset-4 hover:underline dark:text-gray-50"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=o.forwardRef((e,s)=>{let{className:t,variant:r,size:o,asChild:n=!1,...d}=e,p=n?i.DX:"button";return(0,a.jsx)(p,{className:(0,l.cn)(c({variant:r,size:o,className:t})),ref:s,...d})});p.displayName="Button",r()}catch(e){r(e)}})},"(app-pages-browser)/./components/ui/label.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{J:()=>p});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/@radix-ui/react-label/dist/index.mjs"),n=t("(app-pages-browser)/./node_modules/class-variance-authority/dist/index.mjs"),l=t("(app-pages-browser)/./lib/utils.ts"),d=e([l]);l=(d.then?(await d)():d)[0];let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.b,{ref:s,className:(0,l.cn)(c(),t),...r})});p.displayName=i.b.displayName,r()}catch(e){r(e)}})},"(app-pages-browser)/./components/ui/slider.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{A:()=>d});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/@radix-ui/react-slider/dist/index.mjs"),n=t("(app-pages-browser)/./lib/utils.ts"),l=e([n]);n=(l.then?(await l)():l)[0];let d=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(i.bL,{ref:s,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",t),...r,children:[(0,a.jsx)(i.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,a.jsx)(i.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(i.zi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});d.displayName=i.bL.displayName,r()}catch(e){r(e)}})},"(app-pages-browser)/./components/ui/switch.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{d:()=>d});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/@radix-ui/react-switch/dist/index.mjs"),n=t("(app-pages-browser)/./lib/utils.ts"),l=e([n]);n=(l.then?(await l)():l)[0];let d=o.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.bL,{className:(0,n.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(i.zi,{className:(0,n.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});d.displayName=i.bL.displayName,r()}catch(e){r(e)}})},"(app-pages-browser)/./components/ui/tooltip.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{Bc:()=>d,ZI:()=>m,k$:()=>p,m_:()=>c});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),i=t("(app-pages-browser)/./node_modules/@radix-ui/react-tooltip/dist/index.mjs"),n=t("(app-pages-browser)/./lib/utils.ts"),l=e([n]);n=(l.then?(await l)():l)[0];let d=i.Kq,c=i.bL,p=i.l9,m=o.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...o}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{ref:s,sideOffset:r,className:(0,n.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})})});m.displayName=i.UC.displayName,r()}catch(e){r(e)}})}},e=>{var s=s=>e(e.s=s);e.O(0,[2196,562,9268,7330,592,3171,6047,1714,3015,2651,9895,5907,9710,4879,8024,8710,5407,8441,1517,7358],()=>s("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Fbytarch%2FDocuments%2Fprojects%2Fgenie%2Fapp%2Flearning%2Fexpresso%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")),_N_E=e.O()}]);