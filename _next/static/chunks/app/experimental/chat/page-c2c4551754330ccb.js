(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9516],{"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Fbytarch%2FDocuments%2Fprojects%2Fgenie%2Fapp%2Fexperimental%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":(e,s,t)=>{Promise.resolve().then(t.bind(t,"(app-pages-browser)/./app/experimental/chat/page.tsx"))},"(app-pages-browser)/./app/experimental/chat/page.tsx":(e,s,t)=>{"use strict";t.a(e,async(e,o)=>{try{t.r(s),t.d(s,{default:()=>y});var a=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),n=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),r=t("(app-pages-browser)/./components/custom/overview.tsx"),l=t("(app-pages-browser)/./components/custom/chatinput.tsx"),i=t("(app-pages-browser)/./components/custom/message.tsx"),c=t("(app-pages-browser)/./components/custom/use-scroll-to-bottom.ts"),p=t("(app-pages-browser)/./lib/utils.ts"),d=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/panels-top-left.js"),m=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/book-open.js"),u=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/history.js"),x=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/book.js"),g=t("(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js"),h=t("(app-pages-browser)/./components/ui/sheet.tsx"),w=t("(app-pages-browser)/./components/ui/button.tsx"),b=e([l,i,p,h,w]);async function j(){let e=sessionStorage.getItem("reasonEnabled");return(null==e?void 0:e.toLowerCase())==="true"}async function f(){let e=sessionStorage.getItem("searchEnabled");return(null==e?void 0:e.toLowerCase())==="true"}async function v(){let e=sessionStorage.getItem("deepEnabled");return(null==e?void 0:e.toLowerCase())==="true"}function y(){let[e,s]=(0,c.R)(),[t,o]=(0,n.useState)([]),[b,y]=(0,n.useState)(""),[N,S]=(0,n.useState)(!1),[k,_]=(0,n.useState)(!0),[F,A]=(0,n.useState)(null),I=(0,n.useRef)(null),z=()=>{I.current&&(removeEventListener("message",I.current),I.current=null)},C=async()=>{let e;if(!b.trim()||N)return;y(""),S(!0),_(!1),z();let s={role:"user",content:b,id:Date.now().toString()};o(e=>[...e,s]);let a=p.c7,n=await j(),r=await f(),l=await v();e=n?"AA::deepseek-r1-distill-llama-70b":r?"genie::sonar-reasoning":l?"deepresearcher::v1":"closeai::o3-mini";let i=sessionStorage.getItem("reply_to"),c=i?JSON.parse(i).content:null;console.log(c);let d=b;console.log(c),c&&(d='Replying to: "'.concat(c,'"\n\nUser: ').concat(b));let m=(null==F?void 0:F.type)==="image"?F.content:null,u=(null==F?void 0:F.type)==="document"?F.content:null;m&&(e="genie::qwen-qvq-72b-preview|HuggingSpace"),u&&(e="11::deepseek-r1");try{let s=await fetch("https://blacksourcellc.taile6b163.ts.net/v1/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"auth.sessionToken ".concat(a)},body:JSON.stringify({messages:[...t,{role:"user",content:m?[{type:"text",text:b},{type:"image_url",image_url:{url:m}}]:u?[{type:"text",text:"The document content will be used as the context to help you answer my query. Here is the document: "+u},{type:"text",text:"my query is:"+b}]:d||b}],model:e,stream:!0})});if(!s.body)throw Error("No response body");let n="",r={role:"assistant",content:"Something went wrong, please try again.",id:Date.now().toString()};o(e=>[...e,r]);let l=s.body.getReader(),i=new TextDecoder;for(;;){let{done:e,value:s}=await l.read();if(e)break;for(let e of i.decode(s).split("\n"))if(e.startsWith("data: "))try{var x,g;let s=e.slice(6);if("[DONE]"===s)break;let t=JSON.parse(s),a=(null===(g=t.choices[0])||void 0===g?void 0:null===(x=g.delta)||void 0===x?void 0:x.content)||"";n+=a,o(e=>e.map((s,t)=>t===e.length-1&&"assistant"===s.role?{...s,content:n}:s))}catch(e){console.error("Error parsing SSE chunk:",e)}}}catch(e){console.error("API Error:",e),o(e=>[...e,{role:"assistant",content:"Error processing your request",id:Date.now().toString()}])}finally{S(!1),S(!1),sessionStorage.removeItem("uploadedImage"),sessionStorage.removeItem("document"),sessionStorage.removeItem("reply_to"),A(null)}};return(0,a.jsxs)("div",{className:"flex flex-col min-w-0 h-dvh bg-black-to-b from-slate-950 via-slate-900 to-slate-950 text-white",children:[(0,a.jsxs)(h.cj,{children:[(0,a.jsx)(h.CG,{asChild:!0,children:(0,a.jsx)(w.$,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50",children:(0,a.jsx)(d.A,{className:"h-6 w-6"})})}),(0,a.jsxs)(h.h,{side:"left",className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h.Fm,{children:(0,a.jsx)(h.qp,{className:"text-zinc-100",children:"Experimental Chat"})}),(0,a.jsxs)("div",{className:"mt-8 space-y-2",children:[(0,a.jsxs)(w.$,{variant:"ghost",onClick:()=>window.location.href="/experimental/chat",className:"w-full justify-start text-zinc-400 hover:text-zinc-100",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"New Experimental Chat"]}),(0,a.jsxs)(w.$,{variant:"ghost",onClick:()=>window.location.href="/c",className:"w-full justify-start text-zinc-400 hover:text-zinc-100",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"AI Chat"]}),(0,a.jsxs)(w.$,{variant:"ghost",onClick:()=>window.open("https://bytarch.netlify.app/dashboard/docs"),className:"w-full justify-start text-zinc-400 hover:text-zinc-100",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Documentations"]}),(0,a.jsxs)(w.$,{variant:"ghost",onClick:()=>window.location.href="/c/settings",className:"w-full justify-start text-zinc-400 hover:text-zinc-100",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Settings"]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col min-w-0 gap-6 flex-1 overflow-y-scroll pt-4 bg-black-to-b from-slate-950/80 via-slate-900/80 to-slate-950/80 backdrop-blur-sm",children:[0===t.length&&k&&!N&&(0,a.jsx)(r.A,{}),N&&(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[(0,a.jsx)("div",{className:"animate-spin border-t-2 border-gray-400 border-4 w-8 h-8 rounded-full"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Thinking..."})]}),t.map((e,s)=>(0,a.jsx)(i.e,{message:e},s)),N&&(0,a.jsx)(i.q,{}),(0,a.jsx)("div",{ref:s,className:"shrink-0 min-w-[24px] min-h-[24px]"})]}),(0,a.jsx)("div",{className:"flex mx-auto px-4 bg-background pb-4 md:pb-6 gap-2 w-full md:max-w-3xl",children:(0,a.jsx)(l.V,{question:b,setQuestion:y,onSubmit:C,isLoading:N,onFileUpload:(e,s)=>{"image"===e?sessionStorage.setItem("uploadedImage",s):sessionStorage.setItem("document",s),A({type:e,content:s})},onFileRemove:()=>{sessionStorage.removeItem("uploadedImage"),sessionStorage.removeItem("document"),A(null)}})})]})}[l,i,p,h,w]=b.then?(await b)():b,o()}catch(e){o(e)}})},"(app-pages-browser)/./components/custom/overview.tsx":(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var o=t("(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js"),a=t("(app-pages-browser)/./node_modules/@lobehub/icons/es/DeepSeek/index.js"),n=t("(app-pages-browser)/./node_modules/@lobehub/icons/es/Perplexity/index.js"),r=t("(app-pages-browser)/./node_modules/@lobehub/icons/es/OpenAI/index.js"),l=t("(app-pages-browser)/./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs");let i=()=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.P.div,{className:"max-w-3xl mx-auto md:mt-20",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{delay:.75},children:(0,o.jsxs)("div",{className:"rounded-xl p-6 flex flex-col gap-8 leading-relaxed text-center max-w-xl",children:[(0,o.jsxs)("p",{className:"flex flex-row justify-center gap-4 items-center",children:[(0,o.jsx)(a.A,{size:44}),(0,o.jsx)("span",{children:"+"}),(0,o.jsx)(n.A,{size:44}),(0,o.jsx)("span",{children:"+"}),(0,o.jsx)(r.A,{size:44})]}),(0,o.jsxs)("p",{children:["How can ",(0,o.jsx)("strong",{children:"I help you?"}),(0,o.jsx)("br",{})]})]})},"overview")})}},e=>{var s=s=>e(e.s=s);e.O(0,[9268,7330,8873,3171,6047,5745,1714,3015,9895,5907,7731,9710,7074,5925,6653,1551,9673,8441,1517,7358],()=>s("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Fbytarch%2FDocuments%2Fprojects%2Fgenie%2Fapp%2Fexperimental%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")),_N_E=e.O()}]);