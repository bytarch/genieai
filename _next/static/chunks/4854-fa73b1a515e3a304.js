"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4854],{"(app-pages-browser)/./hooks/useChatRoom.ts":(e,t,a)=>{a.a(e,async(e,o)=>{try{a.d(t,{n:()=>m});var n=a("(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js"),r=a("(app-pages-browser)/./node_modules/sonner/dist/index.mjs"),s=a("(app-pages-browser)/./lib/types.ts"),i=a("(app-pages-browser)/./lib/indexedDB.ts"),l=a("(app-pages-browser)/./lib/utils.ts"),c=a("(app-pages-browser)/./node_modules/next/dist/api/navigation.js"),d=a("(app-pages-browser)/./lib/api.ts"),u=a("(app-pages-browser)/./lib/fileStorage.ts"),p=e([l,d,u]);[l,d,u]=p.then?(await p)():p;let m=()=>{let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(null),[p,m]=(0,n.useState)(!1),h=(0,c.useRouter)(),g=(0,n.useCallback)(async()=>{m(!0);try{let e=await (0,i.fH)();t(t=>t.length===e.length&&t.every((t,a)=>t.id===e[a].id)?t:e)}catch(e){console.error("Failed to load chat rooms",e)}finally{m(!1)}},[]);(0,n.useEffect)(()=>{g()},[g]),(0,n.useEffect)(()=>{let e=e=>{if(e.key===i.AQ)try{let a=JSON.parse(e.newValue||"[]");t(e=>e.length===a.length&&e.every((e,t)=>e.id===a[t].id)?e:a)}catch(e){console.error("Error parsing storage event",e)}},a=new BroadcastChannel("chat-rooms-sync");return a.onmessage=e=>{"UPDATE_CHAT_ROOMS"===e.data.type&&g()},window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e),a.close()}},[g]);let w=e=>{e&&localStorage.setItem(i.AQ,JSON.stringify(e));let t=new BroadcastChannel("chat-rooms-sync");t.postMessage({type:"UPDATE_CHAT_ROOMS",timestamp:Date.now()}),t.close()},f=async a=>{let n={id:(0,l.lk)(),name:"New Chat",messages:[],model:a};try{await (0,i.zX)(n);let a=[n,...e];t(e=>[n,...e]),o(n),window.history.pushState({},"","/c?id=".concat(n.id)),w(a)}catch(e){r.toast.error("Failed to create new chat room",{description:e instanceof Error?e.message:"Unknown error"})}},y=()=>{try{let e=localStorage.getItem("knowledgeBase");if(e)return JSON.parse(e).map(e=>({filename:e.filename,content:e.content})).filter(e=>e.filename&&e.content);return[]}catch(e){return console.error("Error retrieving knowledge base content:",e),[]}},b=async(e,t)=>{try{let a=await fetch("https://blacksourcellc.taile6b163.ts.net/system/rag",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"auth.sessionToken ".concat(l.c7)},body:JSON.stringify({query:e,content:t})});if(!a.ok)throw Error("RAG processing failed");return await a.json()}catch(e){throw console.error("RAG context fetch error:",e),e}},v=async(e,n)=>{let c=localStorage.getItem("aiFeatures"),p=c?JSON.parse(c):{search:!0,movies:!0,youtube:!0,imageGeneration:!0,videoGeneration:!1},h=a;if(!h)try{let e={id:(0,l.lk)(),name:"New Chat",messages:[],model:n};await (0,i.zX)(e),window.history.pushState({},"","/c?id=".concat(e.id)),t(t=>[e,...t]),o(e),h=e}catch(e){r.toast.error("Failed to create new chat room",{description:e instanceof Error?e.message:"Unknown error"});return}if(!e.trim())return;let g=sessionStorage.getItem("selectedFileId"),w=e;if(g){let t=(0,u.BO)(g);t&&(w="Context from file: ".concat(t.name," (").concat(t.extension,")\n    \n  File Content:\n  ```").concat(t.extension,"\n  ").concat(t.content,"\n  ```\n    \n  User Query: ").concat(e),sessionStorage.removeItem("selectedFileId"))}let f=y(),v="";f.length>0&&(v=f.map(e=>"File: ".concat(e.filename,"\n\nContent:\n").concat(e.content)).join("\n\n---\n\n"));let C="New Chat"===h.name&&0===h.messages.length,x={id:(0,l.lk)(),content:w,role:"user",timestamp:Date.now()},k=[...h.messages,x],E={...h,name:C?w.length>20?w.substring(0,20)+"...":w:h.name,messages:k};o(E),t(e=>e.map(e=>e.id===h.id?E:e));try{var S;await (0,i.zX)(E),m(!0);let a={id:(0,l.lk)(),content:"",role:"assistant",timestamp:Date.now()},r={...E,messages:[...E.messages,a]},c="true"===localStorage.getItem("ragEnabled"),u={};c&&(u=await b(e,v));let g=[...k];c&&(null==u?void 0:null===(S=u.relevantChunks)||void 0===S?void 0:S.length)&&(g=g.map(e=>"user"===e.role?{...e,content:"[RAG Context Enabled]\n".concat(u.relevantChunks.join("\n"),"\n\n[User Query]\n").concat(e.content)}:e));let w=async function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],!a.content.endsWith(e)){(0,l.O5)(e),a.content+=e;let n={...r,messages:r.messages.map(e=>e.id===a.id?{...e,content:a.content}:e)};o(n),t(e=>e.map(e=>e.id===h.id?n:e)),await (0,i.zX)(n)}},f=p.search&&(e.toLowerCase().includes("find")||e.toLowerCase().includes("visit")||e.toLowerCase().includes("go to")||e.toLowerCase().includes("website")||e.toLowerCase().includes("search")||e.toLowerCase().includes("recent")||e.toLowerCase().includes("current")||e.toLowerCase().includes("latest")),y=p.movies&&(e.toLowerCase().includes("imdb.com")||e.toLowerCase().includes("bzblackstream.vercel.app/movies/")),C=p.youtube&&(e.toLowerCase().includes("youtube.com")||e.toLowerCase().includes("youtu.be")),x=p.imageGeneration&&(e.toLowerCase().includes("product a image")||e.toLowerCase().includes("create image")||e.toLowerCase().includes("product image")||e.toLowerCase().includes("product an image")||e.toLowerCase().includes("create a image")||e.toLowerCase().includes("image of")||e.toLowerCase().includes("generate image")),L=p.videoGeneration&&e.toLowerCase().includes("@video");!f||y||C||x||L||e.toLowerCase().includes("@audio")||n.toLowerCase().includes("zero")||n.toLowerCase().includes("OO")||n.toLowerCase().includes("501")||n.toLowerCase().includes("img")?y?await (0,d.Co)(n,g,(e,t)=>w(e,t)):C?(0,s.Zb)(e)&&await (0,d.bl)(n,g,(e,t)=>w(e,t)):x?await (0,d.Wd)("502::flux",g,(e,t)=>w(e,t)):await (0,d.Wd)(n,g,(e,t)=>w(e,t)):await (0,d.Wd)("501::searchgpt",g,(e,t)=>w(e,t))}catch(e){r.toast.error("Failed to send message",{description:e instanceof Error?e.message:"Unable to process your message"})}finally{m(!1)}},C=async()=>{if(a&&window.confirm("Are you sure you want to delete this chat room?"))try{await (0,i.j2)(a.id);let e=await (0,i.fH)();t(e),o(null),h.push("/c"),w(e),r.toast.success("Chat room deleted successfully")}catch(e){r.toast.error("Error deleting chat room",{description:e instanceof Error?e.message:"Unable to delete chat room"})}},x=async a=>{if(a&&window.confirm("Are you sure you want to delete this chat room?"))try{await (0,i.j2)(a.id);let n=e.filter(e=>e.id!==a.id);t(n),o(null),h.push("/c"),w(n),r.toast.success("Chat room deleted successfully")}catch(e){r.toast.error("Error deleting chat room",{description:e instanceof Error?e.message:"Unable to delete chat room"})}},k=async()=>{(0,u.EA)()},E=async e=>{if(!e){r.toast.error("No chat room selected");return}let t=await (0,l.FH)();if(!t){r.toast.error("Error",{description:"Unable to verify user credentials. Please try again later"});return}let a=new Date,o=t&&t.expiration_date&&new Date(t.expiration_date)>a;try{if(!o){r.toast.error("Chat backup not permitted",{description:"Upgrade your plan to use this feature"});return}let a="".concat(e.name,"__").concat(e.id,".json"),n=await fetch("https://blacksourcellc.taile6b163.ts.net/chat/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:a,jsonData:e,folder:"".concat(t.created_at.toString(),"/")})});if(!n.ok)throw Error("Failed to upload chat");let s=await n.json();return r.toast.success("Chat has been successfully backed up."),s}catch(e){console.error("Chat upload error:",e),r.toast.error("Failed to upload chat",{description:e instanceof Error?e.message:"Unknown error"})}},S=async e=>{m(!0);let t=await (0,d.Iy)(e);return m(!1),t};return{setIsLoading:m,broadcastChatRoomsUpdate:w,deleteCurrentChatRoomSelect:x,setChatRooms:t,backUpChatSelect:E,saveChatRoom:i.zX,chatRooms:e,currentChatRoom:a,isLoading:p,createNewChatRoom:f,sendMessage:v,clearChat:()=>{C()},deleteCurrentChatRoom:C,setCurrentChatRoom:o,sortChatRooms:()=>{t(e=>[...e].sort((e,t)=>parseInt(t.id)-parseInt(e.id)))},enhancePromptWithAI:S,uploadFile:k}};o()}catch(e){o(e)}})},"(app-pages-browser)/./lib/fileStorage.ts":(e,t,a)=>{a.a(e,async(e,o)=>{try{a.d(t,{AQ:()=>l,BO:()=>p,EA:()=>m,Y5:()=>u,_W:()=>d});var n=a("(app-pages-browser)/./node_modules/sonner/dist/index.mjs"),r=a("(app-pages-browser)/./lib/encrypt.tsx"),s=a("(app-pages-browser)/./lib/utils.ts"),i=e([s]);s=(i.then?(await i)():i)[0];let l="uploadedFiles",c=async()=>{try{let e=await (0,s.FH)();if(!e){n.toast.error("Error!",{description:"Unable to verify user credentials."});return}let t=new Date;if(!(e&&e.expiration_date&&new Date(e.expiration_date)>t)){n.toast.error("Premium Access Required!",{description:"Upgrade your plan to access this feature."});return}let a=(0,r.mj)(),o=document.createElement("input");o.type="file",o.accept="*/*",o.onchange=async e=>{let t=e.target;if(t.files&&t.files.length>0){let o=t.files[0];if(!function(e){let t=e.name.toLowerCase(),a=e.type;if(e.webkitRelativePath&&""!==e.webkitRelativePath)return alert("Folder uploads are not allowed"),!1;let o=[".zip",".rar",".7z",".tar",".gz",".bz2",".deb",".rpm",".msi",".pkg",".exe",".app",".dmg",".iso",".bat",".cmd",".sh",".ps1",".apk",".ipa",".deb",".rpm",".dmg",".pkg",".msi",".exe",".cab",".vbs",".jar",".reg"].some(e=>t.endsWith(e)),n=["application/x-executable","application/x-msdownload","application/x-msi","application/x-apple-diskimage","application/vnd.debian.binary-package","application/x-rpm"].includes(a);return!o&&!n||(alert("FIle type is not permitted."),!1)}(o)){e.target.value="";return}let r=o.type.startsWith("image/"),s=o.type.startsWith("video/");try{let e;if(r||s){let t=new FileReader;t.readAsDataURL(o),e=await new Promise((e,i)=>{t.onload=async()=>{let l=t.result;try{let t,i;n.toast.info("Uploading ".concat(r?"image":"video","...")),r?(t={model:"69::google/learnlm-1.5-pro-experimental",messages:[{role:"system",content:"You are an expert visual information extractor with the following core capabilities:\n\n\uD83D\uDCCB Text Extraction Protocol:\n- Capture ALL visible text, regardless of orientation\n- Preserve exact formatting and layout\n- Transcribe text verbatim\n- Support multiple languages and scripts\n- Handle handwritten and printed text\n- Include text location and context\n\n\uD83D\uDD0D Image Information Extraction:\n- Describe image content comprehensively\n- Identify objects, people, and scenes\n- Analyze visual composition\n- Detect colors, textures, and patterns\n- Provide contextual insights\n\n\uD83D\uDCA1 Extraction Guidelines:\n1. Prioritize text readability\n2. Capture numerical and alphanumeric data\n3. Note text orientation and placement\n4. Describe text style (font, size, color)\n5. Provide linguistic and contextual analysis\n\n\uD83C\uDF10 Multilingual Support:\n- Recognize and transcribe text in multiple scripts\n- Provide translation hints if applicable\n- Detect language of text elements\n\n\uD83D\uDCCA Reporting Style:\n- Clear, concise markdown format\n- Use bullet points for structured information\n- Highlight key observations\n- Include confidence levels for extracted information"},{role:"user",content:[{type:"text",text:"Extract all text and provide comprehensive image analysis"},{type:"image_url",image_url:{url:l,detail:"high"}}]}],max_tokens:8e4,temperature:.3,top_p:.9},i="https://blacksourcellc.taile6b163.ts.net/v1/v2/ai/bylearn/completions"):s&&(t={base64:l.split(",")[1],type:o.type.split("/")[1],filename:o.name},i="https://blacksourcellc.taile6b163.ts.net/v1/v2/ai/tools/docs");let c=await fetch(i,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json; charset=utf-8",Authorization:"auth.sessionToken "+a,Origin:"https://bytarch.sytes.net",Referer:"https://bytarch.sytes.net/","User-Agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Mobile Safari/537.36"},body:JSON.stringify(t)});if(!c.ok)throw Error("Failed to upload ".concat(r?"image":"video"));let d=await c.json();e({content:d.response||d})}catch(e){i(e)}},t.onerror=e=>i(e)})}else{let t=new FormData;t.append("file",o);let n=await fetch("https://blacksourcellc.taile6b163.ts.net/edit",{method:"POST",headers:{Accept:"*/*",Authorization:"auth.sessionToken "+a},body:t});if(!n.ok)throw Error("Failed to upload file");e=await n.json()}let t=o.name.split(".").pop()||"",i={id:"file-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:o.name,type:o.type,extension:t,content:e.content,apiResponse:r||s?e.apiResponse:void 0,uploadedAt:Date.now()},c=d();c.push(i);let u=c.slice(-10);localStorage.setItem(l,JSON.stringify(u)),sessionStorage.setItem("selectedFileId",i.id),n.toast.success("".concat(r?"Image":"Video"," uploaded successfully"))}catch(t){let e=t instanceof Error?t.message:"Unable to upload file";n.toast.error("Error uploading ".concat(r?"image":"video"),{description:e})}}},o.click()}catch(e){n.toast.error("Error in file upload process",{description:e instanceof Error?e.message:"Unable to start file upload"})}},d=()=>{try{let e=localStorage.getItem(l);return(e?JSON.parse(e):[]).reverse()}catch(e){return console.error("Error loading uploaded files",e),[]}},u=e=>{try{let t=d().filter(t=>t.id!==e);localStorage.setItem(l,JSON.stringify(t))}catch(e){console.error("Error deleting uploaded file",e)}},p=e=>d().find(t=>t.id===e),m=async()=>c();o()}catch(e){o(e)}})},"(app-pages-browser)/./lib/indexedDB.ts":(e,t,a)=>{a.d(t,{AQ:()=>o,fH:()=>r,j2:()=>s,zX:()=>n});let o="chatRooms",n=e=>{try{let t=r().filter(t=>t.id!==e.id);t.push(e);let a=JSON.stringify(t),n=a.trim().startsWith("[")?a:"[".concat(a,"]");localStorage.setItem(o,n)}catch(e){console.error("Error saving chat room",e)}},r=()=>{try{let e=localStorage.getItem(o);if(!e)return[];let t=e.trim().startsWith("[")?e:"[".concat(e,"]");return JSON.parse(t).reverse()}catch(e){return console.error("Error loading chat rooms",e),[]}},s=e=>{try{let t=r().filter(t=>t.id!==e);localStorage.setItem(o,JSON.stringify(t))}catch(e){console.error("Error deleting chat room",e)}}},"(app-pages-browser)/./lib/types.ts":(e,t,a)=>{a.d(t,{BQ:()=>s,Kk:()=>r,Nx:()=>i,Oc:()=>c,Zb:()=>n,dp:()=>u,eH:()=>p,mN:()=>d,qT:()=>o,y8:()=>l});let o={};function n(e){for(let t of[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)([^&\n\s]+)/,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^&\n\s]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([^&\n\s]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/shorts\/([^&\n\s]+)/]){let a=e.match(t);if(a&&a[1])return a[1]}return null}async function r(){try{let e=await fetch("https://raw.githubusercontent.com/bytarch/bytarch.github.io/refs/heads/main/v2/assets/compiler/map.json",{});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));o=await e.json()}catch(e){return console.error("Failed to fetch compiler map:",e),[]}}let s={"free::sourceai":"SourceGPT (Free)"};async function i(){try{let e=await fetch("https://raw.githubusercontent.com/bytarch/bytarch.github.io/refs/heads/main/v2/assets/ai/genie-models.json");return s=await e.json()}catch(e){return console.error("Failed to update model names:",e),[]}}let l=[{title:"Movie Watcher",key:"movies",prompts:["What is this movie about? https://www.imdb.com/title/tt14948432/"],description:"Get detailed movie information and insights"},{title:"Image Generation",key:"imageGeneration",prompts:["Generate a realistic image of "],description:"Create AI-generated images with detailed prompts"},{title:"Internet Research",key:"search",prompts:["search the web for the latest news on in Belize"],description:"Perform comprehensive web searches"},{title:"YouTube Video Research",key:"youtube",prompts:["What is this youtube video about? https://www.youtube.com/watch?v=yGsVo0uIJVs"],description:"Analyze and get insights from YouTube videos"}],c={search:!0,movies:!0,youtube:!0,imageGeneration:!0,videoGeneration:!1},d=["English","Spanish","French","German","Chinese","Japanese","Arabic","Russian","Portuguese","Italian","Korean"],u=["Formal","Informal","Literal","Interpretive","Concise","Casual","Technical","Literary","Academic"],p={English:["The sun rises in the east and sets in the west.","Education is the key to personal growth and success.","Climate change is affecting ecosystems worldwide.","Renewable energy sources are becoming more important.","The human brain is capable of incredible learning."],Spanish:["El sol sale por el este y se pone por el oeste.","La educaci\xf3n es la clave del crecimiento personal y el \xe9xito.","El cambio clim\xe1tico est\xe1 afectando los ecosistemas en todo el mundo.","Las fuentes de energ\xeda renovable son cada vez m\xe1s importantes.","El cerebro humano es capaz de un aprendizaje incre\xedble."],French:["Le soleil se l\xe8ve \xe0 l'est et se couche \xe0 l'ouest.","L'\xe9ducation est la cl\xe9 de la croissance personnelle et du succ\xe8s.","Le changement climatique affecte les \xe9cosyst\xe8mes dans le monde entier.","Les sources d'\xe9nergie renouvelable deviennent de plus en plus importantes.","Le cerveau humain est capable d'un apprentissage incroyable."],German:["Die Sonne geht im Osten auf und im Westen unter.","Bildung ist der Schl\xfcssel zur pers\xf6nlichen Entwicklung und zum Erfolg.","Der Klimawandel wirkt sich auf \xd6kosysteme weltweit aus.","Erneuerbare Energiequellen werden immer wichtiger.","Das menschliche Gehirn ist zu unglaublichem Lernen f\xe4hig."],Chinese:["太阳从东方升起，从西方落下。","教育是个人成长和成功的关键。","气候变化正在影响全球生态系统。","可再生能源越来越重要。","人类大脑能够进行令人难以置信的学习。"],Japanese:["太陽は東から昇り、西に沈む。","教育は個人の成長と成功の鍵である。","気候変動は世界中の生態系に影響を与えている。","再生可能エネルギー源の重要性が増している。","人間の脳は信じられないほどの学習能力を持っている。"],Arabic:["تشرق الشمس من الشرق وتغرب في الغرب.","التعليم هو مفتاح النمو الشخصي والنجاح.","التغير المناخي يؤثر على النظم البيئية في جميع أنحاء العالم.","مصادر الطاقة المتجددة تصبح أكثر أهمية.","الدماغ البشري قادر على تعلم مذهل."],Russian:["Солнце восходит на востоке и заходит на западе.","Образование - ключ к личностному росту и успеху.","Изменение климата влияет на экосистемы во всем мире.","Возобновляемые источники энергии становятся все важнее.","Человеческий мозг способен к невероятному обучению."],Portuguese:["O sol nasce no leste e se p\xf5e no oeste.","A educa\xe7\xe3o \xe9 a chave para o crescimento pessoal e o sucesso.","As mudan\xe7as clim\xe1ticas est\xe3o afetando os ecossistemas em todo o mundo.","As fontes de energia renov\xe1vel est\xe3o se tornando cada vez mais importantes.","O c\xe9rebro humano \xe9 capaz de um aprendizado incr\xedvel."],Italian:["Il sole sorge a est e tramonta a ovest.","L'istruzione \xe8 la chiave della crescita personale e del successo.","Il cambiamento climatico sta influenzando gli ecosistemi in tutto il mondo.","Le fonti di energia rinnovabile stanno diventando sempre pi\xf9 importanti.","Il cervello umano \xe8 capace di un apprendimento incredibile."],Korean:["태양은 동쪽에서 떠오르고 서쪽으로 진다.","교육은 개인의 성장과 성공의 열쇠이다.","기후 변화가 전 세계 생태계에 영향을 미치고 있다.","재생 가능한 에너지원의 중요성이 커지고 있다.","인간의 뇌는 믿을 수 없는 학습 능력을 가지고 있다."]}}}]);